<?php
  $query = "SELECT * FROM Store";
  if(isset($_REQUEST['id'])) $query=$query." WHERE StoreID='".$_REQUEST['id']."'";
  include('connect.php');
  $result = mysql_query($query) or die(mysql_error());
  if($result)
  {
    $response["result"] = array();
    while ($row = mysql_fetch_array($result)) {
      $store= array();
      $store["StoreID"] = $row["StoreID"];
      $store["StoreName"] = $row["StoreName"];
      $store["Logo"] = base64_encode($row["Logo"]);     
      //echo $row["Logo"];
      $store["Description"] = $row["Description"];   
      array_push($response["result"], $store);
    }
    $response["success"] = 1;
    echo json_encode($response);
    //mysql_query("UPDATE Store SET Logo=0xffd8ffe000104a46494600010100000100010000ffdb008400090607080706090807080a0a090b0d160f0d0c0c0d1b14151016201d2222201d1f1f2428342c242631271f1f2d3d2d3135373a3a3a232b3f443f384334393a37010a0a0a0d0c0d1a0f0f1a37251f253737373737373737373737373737373737373737373737373737373737373737373737373737373737373737373737373737ffc00011080048004803012200021101031101ffc4001b00000202030100000000000000000000000506000401020307ffc400311000020103030303020503050000000000010203000411051221133141225161719106324281c1b1d1f014233373a1ffc4001801010101010100000000000000000000000203000104ffc4001c1100020301010101000000000000000000000102113121415103ffda000c03010002110311003f00f5902b702b5cd0cd73554b048d19ca9909276f7da3dbeb5e6b2ba1296e218559a591542f7c9aa4dabc79ff00690b03c039ee7da95a7d41ef1f00b6d27818c003e28869dd30bd34545c8e48c67ef593b6271ad0a36a73b292a510ff00d79fe6b9457fa809d7ad2db18f07211483f1e2b998d514b29fbd6eb13c9c40dea23391df1482775d7218ee6386e54a073b564c7a73f5a3149d73148a1a3995191b20aeeee7e94c7a35c34d69d390112458539392478342eceb45d22a564d4ac12a6ea4ff00c572992ecaa1cb2855c7c77fe69aa47d88ce470a0935e58f36a37f7125e6e0c646dc50212067c7ed464d615820abdc344c0469e951ce1b92288d95f811e2343823924af2734bb6f7f196e9dd2f4661dc9edf4abb32b068e593d08c0b6eedb97dff00ad6aac13ee8c704c2747dd90071807bd14b50a2154c76f2291e2d6194f4ecd0ccc4e303b7147a29f54b9b511c690dbe42e4a12cc48f93dbe98fde9c40d056588cf2f4b193c718f3f5aefa7cfd1ba45650164f4138f3e3fb5048cdfd8c81e795e556cee51c6ecfc8ed56ede5eb26f190cbc8068b7d394349a95a46e248d5c766506a52094a41b9197c104579cbdcdc433742d036e8c7a82f9af40bd985bda4b2938dabc5275fc68b7318442c1ce4ba36d652283d1c4ad34306a76845e23457783b5f6f07e33dbf63467f0d590bbd26de79514305036b83e0f8ff3c56d169f03dbb7543beec33991c9ce391edcd5ed26fe155481a34f5f1bb1d8e78a749bb337ca065e59c56930e9c62389b962a3bd687549832a5a29110e0631cfbd394b6514f1344e0175ec7b5056d3e0b79760802b670413c63de9388548196d7d72d39ea465a2ce3239a2a91aa93b57823b1e2bb5ada2a82e514678c77ae972e9110e701479a2e26b2fd831ff004a80fe9c8fb562b8697375add8fb363ff2a563871d4a1371a7dc44bf9990e3ebe295f4680ffcb31c91e9f9a70a56940b6bb963dd8cc871fc507a3897ae9b7218170378c72702b3a5daacf2bc60e0ae1149e03719e0d2c6bf793d9dd00c15a368c1c6795e7cd13d1f55bb4b0022b75b8c1c452850a7681dcfbf269292b3b28b487dd3da3b8ceee25418913e6abea5082fca823f49f22a868372c216967c8b97199370c60e78156ee662ce5a46c1c60556f84bd06b5ccb6c8e9e9c11c67bd0a9a679e72cedcb1fcb9ab77db4484039fd59cf6f8a1e48501c13eacf1ed509b29118745e2d9fdba871f6152b1a3b01663c6589a94d601e9d98d2b7e2590d9ced7013702aa47c1ed9a95284f0a7e7d950a93dda4fa84b2245856fca24391f7cd3069376676766558c28dbb54e07b8ac54a11fa5a6fc0c477b710ae5d5318ec0f35722bfeb42accaca7c6e1c8a952acdb441a451d44fa99882030efee6ab6e0cadc607804e6a54a94b4e866d4ec8517d854a952a8b007fffd9");
  }else{
    $response["success"] = 0;
    $response["message"]= "Invalid Command";
    echo json_encode($response);
  }
?>